<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…Ø¨Ø§Ø¯Ø±Ø© Ø§Ù„Ø¯ÙƒØªÙˆØ±Ø© Ø£Ø·ÙŠØ§Ù Ø­Ø³Ù† Ù…Ø­Ù…Ø¯</title>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root { --tiktok-pink: #fe2c55; --dark: #0a0a0a; --gold: #d4af37; }
        body { background: var(--dark); color: white; font-family: 'Tajawal', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        
        .container { 
            background: #121212; 
            padding: 30px; 
            border-radius: 24px; 
            width: 90%; 
            max-width: 420px; 
            text-align: center; 
            border: 1px solid var(--gold); 
            box-shadow: 0 0 30px rgba(212, 175, 55, 0.2); 
        }

        .initiative-header {
            background: var(--gold);
            color: #000;
            padding: 12px;
            border-radius: 12px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .upload-box { border: 2px dashed var(--gold); padding: 40px 20px; border-radius: 15px; cursor: pointer; margin: 20px 0; background: rgba(212, 175, 55, 0.05); }
        
        .btn { background: var(--gold); color: #000; border: none; padding: 15px; width: 100%; border-radius: 12px; font-weight: bold; cursor: pointer; font-size: 1.1rem; }
        .btn:disabled { background: #444; cursor: not-allowed; }
        
        #status { margin-top: 15px; color: var(--gold); display: none; }
        #success-page, #error-page { display: none; }
        
        .prize-banner { 
            background: linear-gradient(45deg, #d4af37, #f9f295, #b38728);
            color: #000;
            padding: 25px 15px;
            border-radius: 15px;
            font-size: 1.6rem;
            font-weight: bold;
            margin: 20px 0;
            animation: glow 1.5s infinite alternate;
        }

        .instruction-text {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            border-right: 4px solid var(--gold);
            margin-top: 15px;
            font-size: 1rem;
            color: #eee;
            line-height: 1.6;
        }

        @keyframes glow { from { transform: scale(1); } to { transform: scale(1.03); } }
        .loader { border: 3px solid #f3f3f3; border-top: 3px solid var(--gold); border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; display: inline-block; vertical-align: middle; margin-left: 8px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

<div class="container" id="main-container">
    <div class="initiative-header">Ù…Ø¨Ø§Ø¯Ø±Ø© Ø¯ÙƒØªÙˆØ±Ø© Ø£Ø·ÙŠØ§Ù Ø­Ø³Ù† Ø®Ù„Ø§Ù„ Ø´Ù‡Ø± Ø±Ù…Ø¶Ø§Ù† Ø§Ù„ÙƒØ±ÙŠÙ…</div>

    <div id="upload-page">
        <h2> Ø§Ù„Ø®ØµÙ… Ø§Ù„Ø±Ù…Ø¶Ø§Ù†ÙŠğŸŒ™ğŸŒ™</h2>
        <p>Ø§Ø±ÙØ¹ Ù„Ù‚Ø·Ø© Ø´Ø§Ø´Ø© ØªØ¸Ù‡Ø± Ù…ØªØ§Ø¨Ø¹ØªÙƒ Ù„ØµÙØ­ØªÙ†Ø§ Ø¹Ù„Ù‰ ØªÙŠÙƒØªÙˆÙƒ</p>
        
        <div class="upload-box" onclick="document.getElementById('fileInput').click()">
            <span id="file-label">ğŸ“ Ø§Ø¶ØºØ· Ù„Ø±ÙØ¹ Ø§Ù„ØµÙˆØ±Ø©</span>
            <input type="file" id="fileInput" accept="image/*" hidden>
        </div>

        <button id="verifyBtn" class="btn" onclick="analyzeImage()">Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</button>
        
        <div id="status">
            <div class="loader"></div> <span>Ø¬Ø§Ø±ÙŠ ÙØ­Øµ Ù„Ù‚Ø·Ø© Ø§Ù„Ø´Ø§Ø´Ø©...</span>
        </div>
    </div>

    <div id="success-page">
        <h1 style="font-size: 3rem; margin-bottom: 10px;">ğŸŒ™</h1>
        <h2 style="color: var(--gold);">Ù…Ø¨Ø±ÙˆÙƒ! ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ø¨Ù†Ø¬Ø§Ø­</h2>
        <div class="prize-banner">Ø®ØµÙ… Ù…Ù„ÙŠÙˆÙ† Ø¯ÙŠÙ†Ø§Ø± Ø¹Ø±Ø§Ù‚ÙŠ</div>
        
        <div class="instruction-text">
            âš ï¸ <b>Ù…Ù„Ø§Ø­Ø¸Ø© Ù‡Ø§Ù…Ø©:</b><br>
            ÙŠØ±Ø¬Ù‰ Ø¥Ø¸Ù‡Ø§Ø± Ù‡Ø°Ù‡ Ø§Ù„Ø´Ø§Ø´Ø© Ø¥Ù„Ù‰ <b>Ù‚Ø³Ù… Ø§Ù„Ø­Ø³Ø§Ø¨Ø§Øª</b> Ù„ÙŠÙ‚ÙˆÙ…ÙˆØ§ Ø¨Ø¹Ù…Ù„ Ø§Ù„Ø®ØµÙ… Ù„Ø­Ø¶Ø±ØªÙƒÙ… ÙÙˆØ±Ø§Ù‹.
        </div>

        <button class="btn" style="margin-top: 20px;" onclick="location.reload()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <div id="error-page">
        <h1 style="font-size: 3rem; margin-bottom: 10px;">âŒ</h1>
        <h2>ÙØ´Ù„ Ø§Ù„ØªØ­Ù‚Ù‚</h2>
        <p>ØªØ£ÙƒØ¯ Ø£Ù† Ø§Ù„Ø²Ø± Ø£ØµØ¨Ø­ Ø¨Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø±ØµØ§ØµÙŠ (Ù…Ø±Ø§Ø³Ù„Ø©) ÙˆØ£Ù†Ùƒ Ù‚Ù…Øª Ø¨Ù…ØªØ§Ø¨Ø¹Ø© Ø§Ù„Ø­Ø³Ø§Ø¨ ÙØ¹Ù„Ø§Ù‹.</p>
        <button class="btn" onclick="location.reload()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
    </div>
</div>

<script>
    const fileInput = document.getElementById('fileInput');
    const statusDiv = document.getElementById('status');
    const verifyBtn = document.getElementById('verifyBtn');

    fileInput.onchange = () => {
        if(fileInput.files.length > 0) {
            document.getElementById('file-label').innerText = "âœ… ØªÙ… Ø§Ø®ØªÙŠØ§Ø± Ø§Ù„ØµÙˆØ±Ø©";
            document.getElementById('file-label').style.color = "#d4af37";
        }
    };

    async function analyzeImage() {
        if (fileInput.files.length === 0) return alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø© Ø£ÙˆÙ„Ø§Ù‹");

        verifyBtn.disabled = true;
        statusDiv.style.display = 'block';
        
        try {
            const image = fileInput.files[0];
            const result = await Tesseract.recognize(image, 'eng+ara');
            const text = result.data.text.toLowerCase();

            const isPCSuccess = text.includes('following');
            const isMobileSuccess = text.includes('Ù…Ø±Ø§Ø³Ù„Ø©') || 
                                    text.includes('suggested') || 
                                    text.includes('Ù…Ù‚ØªØ±Ø­Ø©');
            const isStillRed = text.includes('Ù…ØªØ§Ø¨Ø¹Ø©') && !text.includes('following');

            setTimeout(() => {
                document.getElementById('upload-page').style.display = 'none';
                statusDiv.style.display = 'none';

                if ((isPCSuccess || isMobileSuccess) && !isStillRed) {
                    document.getElementById('success-page').style.display = 'block';
                } else {
                    document.getElementById('error-page').style.display = 'block';
                }
            }, 1500);

        } catch (error) {
            alert("Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØµÙˆØ±Ø©.");
            location.reload();
        }
    }
</script>
</body>
</html>
